<?xml version="1.0"?>
<addon>
	<id>vendor_data_premoderation</id>
	<name>Vendor data premoderation</name>
	<priority>1000</priority>
	<position>45</position>
	<status>active</status>
	
	<opt_settings>
		<item id="products_prior_approval">
			<name>Products require prior approval</name>
			<type>selectbox</type>
			<default_value>none</default_value>
			<variants>
				<item id="none">
					<name>None</name>
				</item>
				<item id="custom">
					<name>Custom</name>
				</item>
				<item id="all">
					<name>All vendors</name>
				</item>
			</variants>
			<tooltip>"None" - this option is disabled for all vendors; "Custom" - the option is enabled on a vendor details page (the Add-ons tab); "All vendors" - the option is enabled for all vendors.</tooltip>
		</item>
		<item id="products_updates_approval">
			<name>Approve product info updates</name>
			<type>selectbox</type>
			<default_value>none</default_value>
			<variants>
				<item id="none">
					<name>None</name>
				</item>
				<item id="custom">
					<name>Custom</name>
				</item>
				<item id="all">
					<name>All vendors</name>
				</item>
			</variants>
			<tooltip>"None" - this option is disabled for all vendors; "Custom" - the option is enabled on a vendor details page (the Add-ons tab); "All vendors" - the option is enabled for all vendors.</tooltip>
		</item>
		<item id="vendor_profile_updates_approval">
			<name>Approve vendor profile updates</name>
			<type>selectbox</type>
			<default_value>none</default_value>
			<variants>
				<item id="none">
					<name>None</name>
				</item>
				<item id="custom">
					<name>Custom</name>
				</item>
				<item id="all">
					<name>All vendors</name>
				</item>
			</variants>
			<tooltip>"None" - this option is disabled for all vendors; "Custom" - the option is enabled on a vendor details page (the Add-ons tab); "All vendors" - the option is enabled for all vendors.</tooltip>
		</item>
	</opt_settings>
	
	<opt_language_variables>
		<item lang="EN" id="vendor_data_premoderation">Vendor data premoderation</item>
		<item lang="EN" id="product_approval">Product approval</item>
		<item lang="EN" id="notify_vendor_by_email">Notify vendor by e-mail</item>
		<item lang="EN" id="product_approval_status_approved">Your product [product] has been approved by the store administration and added to the product catalog. Now shoppers can order this product in the store.</item>
		<item lang="EN" id="product_approval_status_disapproved">Your product [product] has been disapproved by the store administration</item>
		<item lang="EN" id="products_approval_status_approved">Thank you for submitting new products. The following products have been approved by the store administration and added to the product catalog</item>
		<item lang="EN" id="text_shoppers_can_order_products">Now shoppers can order these products in the store.</item>
		<item lang="EN" id="products_approval_status_disapproved">Thank you for submitting new products. The following products have been disapproved by the store administration</item>
		<item lang="EN" id="approve_selected">Approve selected</item>
		<item lang="EN" id="disapprove_selected">Disapprove selected</item>
		<item lang="EN" id="pre_moderation">Products require prior approval</item>
		<item lang="EN" id="pre_moderation_edit">Approve product info updates</item>
		<item lang="EN" id="pre_moderation_edit_vendors">Approve vendor profile updates</item>
		<item lang="EN" id="text_not_approved_products">You have products that require your approval. Please [follow this link] to review these products.</item>
		<item lang="EN" id="products_approval_status_changed">Your product(s) have been [status]</item>
		<item lang="EN" id="approval">Approval</item>
		<item lang="EN" id="text_vendor_profile_changes_notice">Are you sure that you want to update the profile? Information about your company will not be available in the customer area until the administrator approves it.</item>
	</opt_language_variables>
	
	<opt_queries>
		<item>ALTER TABLE ?:products ADD `approved` char(1) NOT NULL DEFAULT 'Y' AFTER `company_id`</item>
		<item for="uninstall">ALTER TABLE ?:products DROP `approved`</item>
		<item>ALTER TABLE ?:companies ADD `pre_moderation` char(1) NOT NULL DEFAULT 'N'</item>
		<item for="uninstall">ALTER TABLE ?:companies DROP `pre_moderation`</item>
		<item>ALTER TABLE ?:companies ADD `pre_moderation_edit` char(1) NOT NULL DEFAULT 'N'</item>
		<item for="uninstall">ALTER TABLE ?:companies DROP `pre_moderation_edit`</item>
		<item>ALTER TABLE ?:companies ADD `pre_moderation_edit_vendors` char(1) NOT NULL DEFAULT 'N'</item>
		<item for="uninstall">ALTER TABLE ?:companies DROP `pre_moderation_edit_vendors`</item>
		<item>INSERT INTO ?:privilege_descriptions (privilege, description, lang_code, section_id) VALUES ('manage_product_premoderation', 'Approve vendor products', 'EN', '10');</item>
		<item>INSERT INTO ?:privileges (privilege, is_default) VALUES ('manage_product_premoderation', 'Y');</item>
		<item for="uninstall">DELETE FROM ?:privilege_descriptions WHERE privilege = 'manage_product_premoderation'</item>
		<item for="uninstall">DELETE FROM ?:privileges WHERE privilege = 'manage_product_premoderation'</item>
	</opt_queries>
</addon>